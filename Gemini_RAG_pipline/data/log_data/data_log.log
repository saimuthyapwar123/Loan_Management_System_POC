[2025-11-21 19:00:01,829]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 69205f108a717252ff152bdc approved by 69205f2b8a717252ff152bdd]
[2025-11-21 19:00:01,829]  [ERROR] ["Line_no" : 35] [wrapper()] [Unexpected exception in approve_loan: approve_loan() takes 2 positional arguments but 3 were given]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^
TypeError: approve_loan() takes 2 positional arguments but 3 were given
[2025-11-21 19:00:01,830]  [ERROR] ["Line_no" : 70] [approve_endpoint()] [Error approving loan : approve_loan() takes 2 positional arguments but 3 were given]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\routers\loan_router.py", line 65, in approve_endpoint
    return await approve_loan(current, loan_id, admin_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 36, in wrapper
    raise e
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^
TypeError: approve_loan() takes 2 positional arguments but 3 were given
[2025-11-21 19:01:54,037]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 69205f108a717252ff152bdc approved by 69205f2b8a717252ff152bdd]
[2025-11-21 19:01:54,128]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in approve_loan: 404 - Loan 69205f108a717252ff152bdc not found]
[2025-11-21 19:01:54,128]  [WARNING] ["Line_no" : 67] [approve_endpoint()] [loan approve warning : 404: Loan 69205f108a717252ff152bdc not found]
[2025-11-21 19:02:12,042]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 6920693c53a1e8552f9abe7a approved by 69205f2b8a717252ff152bdd]
[2025-11-21 19:02:12,678]  [INFO] ["Line_no" : 27] [wrapper()] [approve_loan executed in 636.29 ms]
[2025-11-21 19:02:27,603]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in apply_loan: 400 - You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPLIED', 'APPROVED']
Please close or complete one loan before applying again.]
[2025-11-21 19:02:27,603]  [ERROR] ["Line_no" : 49] [apply_endpoint()] [Error applying loan : 400: You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPLIED', 'APPROVED']
Please close or complete one loan before applying again.]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\routers\loan_router.py", line 30, in apply_endpoint
    doc = await apply_loan(data)
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 32, in wrapper
    raise http_exc
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\services\loan_service.py", line 40, in apply_loan
    raise HTTPException(
fastapi.exceptions.HTTPException: 400: You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPLIED', 'APPROVED']
Please close or complete one loan before applying again.
[2025-11-21 19:02:40,485]  [ERROR] ["Line_no" : 70] [get_current_user()] [Invalid token: 'NoneType' object has no attribute 'get']
[2025-11-21 19:02:55,231]  [INFO] ["Line_no" : 76] [disburse_endpoint()] [Loan_id 6920693c53a1e8552f9abe7a is disbursed ]
[2025-11-21 19:02:55,232]  [ERROR] ["Line_no" : 35] [wrapper()] [Unexpected exception in disburse_loan: disburse_loan() takes 1 positional argument but 2 were given]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^
TypeError: disburse_loan() takes 1 positional argument but 2 were given
[2025-11-21 19:02:55,232]  [ERROR] ["Line_no" : 82] [disburse_endpoint()] [Error disbursing loan : disburse_loan() takes 1 positional argument but 2 were given]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\routers\loan_router.py", line 77, in disburse_endpoint
    return await disburse_loan(admin, loan_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 36, in wrapper
    raise e
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^
TypeError: disburse_loan() takes 1 positional argument but 2 were given
[2025-11-21 19:04:20,199]  [INFO] ["Line_no" : 76] [disburse_endpoint()] [Loan_id 6920693c53a1e8552f9abe7a is disbursed ]
[2025-11-21 19:04:21,158]  [INFO] ["Line_no" : 27] [wrapper()] [disburse_loan executed in 958.27 ms]
[2025-11-21 19:04:24,587]  [INFO] ["Line_no" : 76] [disburse_endpoint()] [Loan_id 6920693c53a1e8552f9abe7a is disbursed ]
[2025-11-21 19:04:25,023]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in disburse_loan: 400 - Loan 6920693c53a1e8552f9abe7a is already DISBURSED]
[2025-11-21 19:04:25,023]  [WARNING] ["Line_no" : 79] [disburse_endpoint()] [loan disburse warning : 400: Loan 6920693c53a1e8552f9abe7a is already DISBURSED]
[2025-11-21 19:04:47,729]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 69205f6a8a717252ff152bde approved by 69205f2b8a717252ff152bdd]
[2025-11-21 19:04:47,994]  [INFO] ["Line_no" : 27] [wrapper()] [approve_loan executed in 265.1 ms]
[2025-11-21 19:05:47,756]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in record_repayment: 404 - Loan 68bbf02a42b0f4a00a84b2b3 not found]
[2025-11-21 19:05:47,756]  [WARNING] ["Line_no" : 90] [repay_endpoint()] [loan repayment warning : 404: Loan 68bbf02a42b0f4a00a84b2b3 not found]
[2025-11-21 19:06:09,428]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in record_repayment: 400 - Only DISBURSED loans accept repayments]
[2025-11-21 19:06:09,428]  [WARNING] ["Line_no" : 90] [repay_endpoint()] [loan repayment warning : 400: Only DISBURSED loans accept repayments]
[2025-11-21 19:06:23,667]  [INFO] ["Line_no" : 177] [record_repayment()] [Loan 6920693c53a1e8552f9abe7a is Closed , outstanding is 0.0 ]
[2025-11-21 19:06:23,667]  [INFO] ["Line_no" : 178] [record_repayment()] [Loan 6920693c53a1e8552f9abe7a paid : 100000.0 and remaining_balance : 0.0]
[2025-11-21 19:06:23,668]  [INFO] ["Line_no" : 27] [wrapper()] [record_repayment executed in 412.26 ms]
[2025-11-21 19:07:34,383]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in record_repayment: 400 - Loan 6920693c53a1e8552f9abe7a is CLOSED]
[2025-11-21 19:07:34,383]  [WARNING] ["Line_no" : 90] [repay_endpoint()] [loan repayment warning : 400: Loan 6920693c53a1e8552f9abe7a is CLOSED]
[2025-11-21 19:08:27,997]  [INFO] ["Line_no" : 178] [record_repayment()] [Loan 6920693c53a1e8552f9abe7a paid : 1000.0 and remaining_balance : 49000.0]
[2025-11-21 19:08:27,997]  [INFO] ["Line_no" : 27] [wrapper()] [record_repayment executed in 241.5 ms]
[2025-11-21 19:19:36,663]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in apply_loan: 400 - You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPROVED', 'DISBURSED']
Please close or complete one loan before applying again.]
[2025-11-21 19:19:36,664]  [ERROR] ["Line_no" : 49] [apply_endpoint()] [Error applying loan : 400: You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPROVED', 'DISBURSED']
Please close or complete one loan before applying again.]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\routers\loan_router.py", line 30, in apply_endpoint
    doc = await apply_loan(data)
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 32, in wrapper
    raise http_exc
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\services\loan_service.py", line 40, in apply_loan
    raise HTTPException(
fastapi.exceptions.HTTPException: 400: You already have 2 active loans.
Loan IDs: ['69205f6a8a717252ff152bde', '6920693c53a1e8552f9abe7a']
Loan Types: ['GOLD', 'EDUCATION']
Statuses : ['APPROVED', 'DISBURSED']
Please close or complete one loan before applying again.
[2025-11-21 19:20:14,008]  [INFO] ["Line_no" : 27] [wrapper()] [apply_loan executed in 178.52 ms]
[2025-11-21 19:20:14,009]  [INFO] ["Line_no" : 33] [apply_endpoint()] [Successfully loan applied : 69206e15ce73d6d11d885eda]
[2025-11-21 19:36:13,205]  [INFO] ["Line_no" : 27] [wrapper()] [apply_loan executed in 415.84 ms]
[2025-11-21 19:36:13,206]  [INFO] ["Line_no" : 33] [apply_endpoint()] [Successfully loan applied : 692071d4ce73d6d11d885edb]
[2025-11-21 20:41:39,196]  [ERROR] ["Line_no" : 70] [get_current_user()] [Invalid token: 'NoneType' object has no attribute 'get']
[2025-11-21 20:41:47,021]  [INFO] ["Line_no" : 27] [wrapper()] [user_login executed in 1372.8 ms]
[2025-11-21 20:41:47,021]  [INFO] ["Line_no" : 39] [login()] [ Successfully logged in: ramu@gamil.com with role ADMIN]
[2025-11-21 20:41:51,189]  [INFO] ["Line_no" : 27] [wrapper()] [user_login executed in 597.21 ms]
[2025-11-21 20:41:51,190]  [INFO] ["Line_no" : 39] [login()] [ Successfully logged in: 8921342134 with role BORROWER]
[2025-11-21 20:43:13,663]  [INFO] ["Line_no" : 27] [wrapper()] [apply_loan executed in 616.52 ms]
[2025-11-21 20:43:13,663]  [INFO] ["Line_no" : 33] [apply_endpoint()] [Successfully loan applied : 692081898872daf46a54cf40]
[2025-11-21 20:43:55,622]  [INFO] ["Line_no" : 27] [wrapper()] [apply_loan executed in 352.16 ms]
[2025-11-21 20:43:55,622]  [INFO] ["Line_no" : 33] [apply_endpoint()] [Successfully loan applied : 692081b38872daf46a54cf41]
[2025-11-21 20:43:58,832]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in apply_loan: 400 - You already have 2 active loans.
Loan IDs: ['692081898872daf46a54cf40', '692081b38872daf46a54cf41']
Loan Types: ['EDUCATION', 'GOLD']
Statuses : ['APPLIED', 'APPLIED']
Please close or complete one loan before applying again.]
[2025-11-21 20:43:58,832]  [ERROR] ["Line_no" : 49] [apply_endpoint()] [Error applying loan : 400: You already have 2 active loans.
Loan IDs: ['692081898872daf46a54cf40', '692081b38872daf46a54cf41']
Loan Types: ['EDUCATION', 'GOLD']
Statuses : ['APPLIED', 'APPLIED']
Please close or complete one loan before applying again.]
Traceback (most recent call last):
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\routers\loan_router.py", line 30, in apply_endpoint
    doc = await apply_loan(data)
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 32, in wrapper
    raise http_exc
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\utils\decorators.py", line 22, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Agentic-AI\Projects\Loan_Management_System_POC\code\app\services\loan_service.py", line 40, in apply_loan
    raise HTTPException(
fastapi.exceptions.HTTPException: 400: You already have 2 active loans.
Loan IDs: ['692081898872daf46a54cf40', '692081b38872daf46a54cf41']
Loan Types: ['EDUCATION', 'GOLD']
Statuses : ['APPLIED', 'APPLIED']
Please close or complete one loan before applying again.
[2025-11-21 20:45:00,615]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 692081b38872daf46a54cf41 approved by 69205f2b8a717252ff152bdd]
[2025-11-21 20:45:01,283]  [INFO] ["Line_no" : 27] [wrapper()] [approve_loan executed in 668.15 ms]
[2025-11-21 20:45:03,872]  [INFO] ["Line_no" : 64] [approve_endpoint()] [Loan id 692081b38872daf46a54cf41 approved by 69205f2b8a717252ff152bdd]
[2025-11-21 20:45:03,974]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in approve_loan: 400 - Loan 692081b38872daf46a54cf41 is already APPROVED]
[2025-11-21 20:45:03,974]  [WARNING] ["Line_no" : 67] [approve_endpoint()] [loan approve warning : 400: Loan 692081b38872daf46a54cf41 is already APPROVED]
[2025-11-21 20:45:38,844]  [INFO] ["Line_no" : 76] [disburse_endpoint()] [Loan_id 6920693c53a1e8552f9abe7a is disbursed ]
[2025-11-21 20:45:38,979]  [WARNING] ["Line_no" : 31] [wrapper()] [Handled HTTPException in disburse_loan: 404 - Loan 6920693c53a1e8552f9abe7a not found]
[2025-11-21 20:45:38,979]  [WARNING] ["Line_no" : 79] [disburse_endpoint()] [loan disburse warning : 404: Loan 6920693c53a1e8552f9abe7a not found]
[2025-11-21 20:45:52,275]  [INFO] ["Line_no" : 76] [disburse_endpoint()] [Loan_id 692081b38872daf46a54cf41 is disbursed ]
[2025-11-21 20:45:53,299]  [INFO] ["Line_no" : 27] [wrapper()] [disburse_loan executed in 1022.56 ms]
[2025-11-21 20:46:16,417]  [INFO] ["Line_no" : 185] [record_repayment()] [Loan 692081b38872daf46a54cf41 paid : 1000.0 and remaining_balance : 599000.0]
[2025-11-21 20:46:16,417]  [INFO] ["Line_no" : 27] [wrapper()] [record_repayment executed in 292.96 ms]
[2025-11-21 20:46:24,398]  [INFO] ["Line_no" : 185] [record_repayment()] [Loan 692081b38872daf46a54cf41 paid : 9000.0 and remaining_balance : 590000.0]
[2025-11-21 20:46:24,398]  [INFO] ["Line_no" : 27] [wrapper()] [record_repayment executed in 357.99 ms]
